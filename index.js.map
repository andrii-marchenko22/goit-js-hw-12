{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst KEY = \"49660989-ba495770243477578b97293ac\";\n\nexport const getImagesByQuery = async (query, page) => {\n    const searchParams = new URLSearchParams({\n        key: KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,   \n        per_page: 15,\n    })\n    \n    return await axios(`https://pixabay.com/api/?${searchParams}`);\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\"\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMore = document.querySelector(\".load-more-btn\");\n\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport const createGallery = (images) => {\n    const markup = images.map(\n        ({\n           id, \n           largeImageURL,\n           webformatURL,\n           tags,\n           likes,\n           views,\n           comments,\n           downloads,\n        }) =>\n        `\n           <a class=\"gallery-link\" href=\"${largeImageURL}\">\n               <div class=\"gallery-item\" id=\"${id}\">\n                   <img class=\"gallery-item-img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n                   <div class=\"info\">\n                       <p class=\"info-item\"><b>Likes </b>${likes}</p>\n                       <p class=\"info-item\"><b>Views </b>${views}</p>\n                       <p class=\"info-item\"><b>Comments </b>${comments}</p>\n                       <p class=\"info-item\"><b>Downloads </b>${downloads}</p>\n                   </div>\n               </div>\n           </a>\n       `).join('');\n    \n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    lightbox.refresh();\n};\n\nexport const clearGallery = () => {\n    gallery.innerHTML = '';\n};\nexport const showLoader = () => {\n   loader.classList.add(\"show\");\n};\n\nexport const hideLoader = () => {\n   loader.classList.remove(\"show\"); \n};\n\nexport const showLoadMoreButton = () => {\n    loadMore.classList.add(\"load-more-show\");\n}\n\nexport const hideLoadMoreButton = () => {\n    loadMore.classList.remove(\"load-more-show\");\n}\n\nexport function smoothScroll() {\n    const galleryItem = document.querySelector('.gallery-item');\n    if (galleryItem) {\n        const { height } = galleryItem.getBoundingClientRect();\n        window.scrollBy({\n            left: 0,\n            top: height * 1,\n            behavior: 'smooth',\n        });\n    }\n}","import { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton, smoothScroll } from \"./js/render-functions.js\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst form = document.querySelector(\".form\");\nconst btn = document.querySelector(\".btn-form\");\nconst loadMore = document.querySelector(\".load-more-btn\");\n\nlet page = 1;\nlet userInp = \"\";\n\n\nform.addEventListener(\"submit\", async event => {\n    event.preventDefault();\n    \n\n    const userValue = event.target.elements['search-text'].value.trim();\n    page = 1;\n\n    if (!userValue) {\n        iziToast.error({\n            position: \"topLeft\",\n            title: 'Error',\n            message: 'Please enter a search query!',\n        });\n        return;\n    }\n\n    userInp = userValue;\n    showLoader();\n    \n    try {\n\n        const { data } = await getImagesByQuery(userInp, page);\n        const imagesObj = data.hits;\n        \n        hideLoader(); \n        clearGallery();\n\n\n        if (imagesObj.length === 0) {\n            iziToast.error({\n            position: \"topLeft\",\n            title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n        return;\n    }\n        \n\n        if (data.totalHits > imagesObj.length) {\n        showLoadMoreButton()\n    }\n\n        createGallery(imagesObj);\n        \n    }   catch (error) {\n            hideLoader(); \n            iziToast.error({\n            position: \"topLeft\",\n            title: 'Error',\n            message: 'There was an error fetching the images. Please try again later.',\n            });\n    }   finally {\n        event.target.reset();\n    }\n});\n\n\nloadMore.addEventListener(\"click\", async event => {\n    page++;\n    loadMore.disabled = true;\n\n    showLoader()\n\n    try {\n        const { data } = await getImagesByQuery(userInp, page);\n        const imagesObj = data.hits;\n\n        createGallery(imagesObj);\n        smoothScroll();\n\n        data.totalHits > page * 15 ? showLoadMoreButton() : hideLoadMoreButton();\n        \n    }   catch (error) {\n            iziToast.error({\n            position: \"topLeft\",\n            title: 'Error',\n            message: 'There was an error fetching the images. Please try again later.',\n            });\n        \n    }   finally {\n            hideLoader();\n            loadMore.disabled = false;\n    }\n})"],"names":["KEY","getImagesByQuery","query","page","searchParams","axios","gallery","loader","loadMore","lightbox","SimpleLightbox","createGallery","images","markup","id","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","smoothScroll","galleryItem","height","form","userInp","event","userValue","iziToast","data","imagesObj"],"mappings":"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"}